"use strict";(globalThis.webpackChunkrituals_app_docs=globalThis.webpackChunkrituals_app_docs||[]).push([[9588],{1989:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>p,frontMatter:()=>t,metadata:()=>o,toc:()=>a});const o=JSON.parse('{"id":"deployment","title":"Deployment Guide","description":"This guide explains how to deploy the Rituals App backend server. It covers both Local Development Hosting (for testing with friends) and Cloud Deployment (for production).","source":"@site/docs/deployment.md","sourceDirName":".","slug":"/deployment","permalink":"/rituals_app_clean/docs/deployment","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Analytics","permalink":"/rituals_app_clean/docs/features/analytics"},"next":{"title":"Roadmap","permalink":"/rituals_app_clean/docs/roadmap"}}');var i=r(4848),l=r(8453),s=r(3369);const t={sidebar_position:4},d="Deployment Guide",c={},a=[{value:"Option 1: Local Machine as Server (Self-Hosting)",id:"option-1-local-machine-as-server-self-hosting",level:2},{value:"1. Port Forwarding (Router Configuration) \u26a0\ufe0f REQUIRED",id:"1-port-forwarding-router-configuration-\ufe0f-required",level:3},{value:"2. Find Your Public IP",id:"2-find-your-public-ip",level:3},{value:"3. DNS Configuration (Cloudflare)",id:"3-dns-configuration-cloudflare",level:3},{value:"4. Testing the Connection",id:"4-testing-the-connection",level:3},{value:"Option 2: Cloud Deployment (VPS) \u2601\ufe0f",id:"option-2-cloud-deployment-vps-\ufe0f",level:2},{value:"Recommended Stack",id:"recommended-stack",level:3},{value:"Deployment Steps",id:"deployment-steps",level:3},{value:"5. Update Flutter App Configuration",id:"5-update-flutter-app-configuration",level:3}];function h(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"deployment-guide",children:"Deployment Guide"})}),"\n",(0,i.jsxs)(n.p,{children:["This guide explains how to deploy the Rituals App backend server. It covers both ",(0,i.jsx)(n.strong,{children:"Local Development Hosting"})," (for testing with friends) and ",(0,i.jsx)(n.strong,{children:"Cloud Deployment"})," (for production)."]}),"\n",(0,i.jsx)(n.h2,{id:"option-1-local-machine-as-server-self-hosting",children:"Option 1: Local Machine as Server (Self-Hosting)"}),"\n",(0,i.jsx)(n.p,{children:"If you want to host the backend on your own computer and access it from a mobile device or the internet, follow these steps."}),"\n",(0,i.jsx)(s.A,{definition:'\nflowchart LR\n  Mobile["Mobile App (4G/WiFi)"] --\x3e|Internet| Router["Home Router"]\n  \n  subgraph LocalMachine ["Your PC (Local Machine)"]\n      direction TB\n      Docker["Docker Container"]\n      Node["Node.js Server"]\n  end\n  \n  Router --\x3e|"Port Forwarding :3000"| Docker\n  Docker --\x3e Node\n  \n  style Router fill:#ffcc80,stroke:#e65100\n  style LocalMachine fill:#e1f5fe,stroke:#01579b\n'}),"\n",(0,i.jsx)(n.h3,{id:"1-port-forwarding-router-configuration-\ufe0f-required",children:"1. Port Forwarding (Router Configuration) \u26a0\ufe0f REQUIRED"}),"\n",(0,i.jsx)(n.p,{children:"To make your local server (running on port 3000) accessible from the outside world, you need to configure Port Forwarding on your router."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Access your Router Admin Panel (usually ",(0,i.jsx)(n.code,{children:"192.168.1.1"})," or ",(0,i.jsx)(n.code,{children:"192.168.0.1"}),")."]}),"\n",(0,i.jsxs)(n.li,{children:["Navigate to ",(0,i.jsx)(n.strong,{children:"Port Forwarding"})," / ",(0,i.jsx)(n.strong,{children:"Virtual Server"})," / ",(0,i.jsx)(n.strong,{children:"NAT"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Add a new rule:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"External Port:"})," 3000"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Internal IP:"})," Your computer's local IP (e.g., ",(0,i.jsx)(n.code,{children:"192.168.1.128"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Internal Port:"})," 3000"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Protocol:"})," TCP"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Service Name:"})," Rituals API"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"2-find-your-public-ip",children:"2. Find Your Public IP"}),"\n",(0,i.jsx)(n.p,{children:"You need to know your public IP address to connect from outside."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-powershell",children:'# Get Public IP via PowerShell\r\n$publicIp = Invoke-RestMethod -Uri "https://api.ipify.org"\r\nWrite-Host "Public IP: $publicIp"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"3-dns-configuration-cloudflare",children:"3. DNS Configuration (Cloudflare)"}),"\n",(0,i.jsx)(n.p,{children:"If you have a domain name, you can point it to your public IP."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Type:"})," A Record"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Name:"})," api (e.g., ",(0,i.jsx)(n.code,{children:"api.yourdomain.com"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Content:"})," Your PUBLIC_IP_ADDRESS"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Proxy Status:"})," DNS Only (Gray Cloud) - ",(0,i.jsx)(n.em,{children:"Initially keep proxy off for direct connection testing"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"TTL:"})," Auto"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"4-testing-the-connection",children:"4. Testing the Connection"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Test Port Forwarding (from mobile network):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl http://YOUR_PUBLIC_IP:3000/api/badges\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"option-2-cloud-deployment-vps-\ufe0f",children:"Option 2: Cloud Deployment (VPS) \u2601\ufe0f"}),"\n",(0,i.jsx)(n.p,{children:"For a production-ready environment, we recommend using a Virtual Private Server (VPS) like DigitalOcean, AWS EC2, or Hetzner."}),"\n",(0,i.jsx)(n.h3,{id:"recommended-stack",children:"Recommended Stack"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"OS:"})," Ubuntu 22.04 LTS"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Runtime:"})," Docker & Docker Compose"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Reverse Proxy:"})," Nginx (for SSL/HTTPS)"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"deployment-steps",children:"Deployment Steps"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Provision Server:"})," Buy a VPS (e.g., $5/mo droplet)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Install Docker:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"apt update && apt install docker.io docker-compose\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Clone Repository:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/your-repo/rituals-backend.git\r\ncd rituals-backend\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Configure Environment:"}),"\r\nCreate ",(0,i.jsx)(n.code,{children:".env"})," file with production values."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Run with Docker Compose:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker-compose -f docker-compose.prod.yml up -d\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Test Domain:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl https://api.yourdomain.com/api/badges\n"})}),"\n",(0,i.jsx)(n.h3,{id:"5-update-flutter-app-configuration",children:"5. Update Flutter App Configuration"}),"\n",(0,i.jsx)(n.p,{children:"Update the API URL in your Flutter application to point to the production server."}),"\n",(0,i.jsxs)(n.p,{children:["File: ",(0,i.jsx)(n.code,{children:"lib/services/api_service.dart"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"// api_service.dart\r\nstatic const String _productionUrl = 'https://api.yourdomain.com/api';\r\n\r\n// Use this URL when building for release\r\nstatic String get baseUrl {\r\n  if (kReleaseMode) return _productionUrl;\r\n  return _localUrl;\r\n}\n"})})]})}function p(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}}}]);