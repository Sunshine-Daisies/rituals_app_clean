"use strict";(globalThis.webpackChunkrituals_app_docs=globalThis.webpackChunkrituals_app_docs||[]).push([[889],{8453:(e,s,i)=>{i.d(s,{R:()=>l,x:()=>c});var n=i(6540);const r={},d=n.createContext(r);function l(e){const s=n.useContext(d);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),n.createElement(d.Provider,{value:s},e.children)}},9624:(e,s,i)=>{i.r(s),i.d(s,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>n,toc:()=>t});const n=JSON.parse('{"id":"backend/database","title":"Database Schema","description":"The project uses PostgreSQL as the primary data store. Below is the schema design for the core modules.","source":"@site/docs/backend/database.md","sourceDirName":"backend","slug":"/backend/database","permalink":"/docs/backend/database","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/backend/database.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Architecture","permalink":"/docs/backend/architecture"},"next":{"title":"Setup & Installation","permalink":"/docs/mobile/setup"}}');var r=i(4848),d=i(8453);const l={sidebar_position:3},c="Database Schema",a={},t=[{value:"Core Tables",id:"core-tables",level:2},{value:"<code>users</code>",id:"users",level:3},{value:"<code>rituals</code>",id:"rituals",level:3},{value:"<code>ritual_logs</code>",id:"ritual_logs",level:3},{value:"Gamification Tables",id:"gamification-tables",level:2},{value:"<code>user_profiles</code>",id:"user_profiles",level:3},{value:"<code>badges</code>",id:"badges",level:3},{value:"<code>user_badges</code>",id:"user_badges",level:3},{value:"Social Tables",id:"social-tables",level:2},{value:"<code>friendships</code>",id:"friendships",level:3},{value:"<code>partnerships</code>",id:"partnerships",level:3}];function o(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,d.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"database-schema",children:"Database Schema"})}),"\n",(0,r.jsxs)(s.p,{children:["The project uses ",(0,r.jsx)(s.strong,{children:"PostgreSQL"})," as the primary data store. Below is the schema design for the core modules."]}),"\n",(0,r.jsx)(s.h2,{id:"core-tables",children:"Core Tables"}),"\n",(0,r.jsx)(s.h3,{id:"users",children:(0,r.jsx)(s.code,{children:"users"})}),"\n",(0,r.jsx)(s.p,{children:"Stores authentication and profile information."}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"id"})," (UUID/Serial): Primary Key"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"email"})," (String): Unique"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"password_hash"})," (String)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"username"})," (String): Unique"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"created_at"})," (Timestamp)"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"rituals",children:(0,r.jsx)(s.code,{children:"rituals"})}),"\n",(0,r.jsx)(s.p,{children:"Stores the habits created by users."}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"id"})," (Serial): Primary Key"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"user_id"})," (FK -> users.id)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"title"})," (String)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"description"})," (Text)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"frequency"})," (Enum): 'daily', 'weekly', etc."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"reminder_time"})," (Time)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"is_archived"})," (Boolean)"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"ritual_logs",children:(0,r.jsx)(s.code,{children:"ritual_logs"})}),"\n",(0,r.jsx)(s.p,{children:"Records every completion of a ritual."}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"id"})," (Serial): Primary Key"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"ritual_id"})," (FK -> rituals.id)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"completed_at"})," (Timestamp)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"note"})," (Text): Optional user note"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"gamification-tables",children:"Gamification Tables"}),"\n",(0,r.jsx)(s.h3,{id:"user_profiles",children:(0,r.jsx)(s.code,{children:"user_profiles"})}),"\n",(0,r.jsx)(s.p,{children:"Stores gamification stats."}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"user_id"})," (FK -> users.id)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"xp"})," (Integer): Total experience points"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"level"})," (Integer): Current level"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"coins"})," (Integer): Virtual currency"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"current_streak"})," (Integer)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"longest_streak"})," (Integer)"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"badges",children:(0,r.jsx)(s.code,{children:"badges"})}),"\n",(0,r.jsx)(s.p,{children:"Definitions of available badges."}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"id"})," (Serial)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"name"})," (String)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"description"})," (String)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"icon_url"})," (String)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"xp_reward"})," (Integer)"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"user_badges",children:(0,r.jsx)(s.code,{children:"user_badges"})}),"\n",(0,r.jsx)(s.p,{children:"Badges earned by users."}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"user_id"})," (FK)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"badge_id"})," (FK)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"earned_at"})," (Timestamp)"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"social-tables",children:"Social Tables"}),"\n",(0,r.jsx)(s.h3,{id:"friendships",children:(0,r.jsx)(s.code,{children:"friendships"})}),"\n",(0,r.jsx)(s.p,{children:"Manages friend connections."}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"requester_id"})," (FK)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"addressee_id"})," (FK)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"status"})," (Enum): 'pending', 'accepted', 'rejected'"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"partnerships",children:(0,r.jsx)(s.code,{children:"partnerships"})}),"\n",(0,r.jsx)(s.p,{children:"Manages 1v1 ritual partnerships."}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"id"})," (Serial)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"ritual_id"})," (FK)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"user1_id"})," (FK)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"user2_id"})," (FK)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"status"})," (Enum): 'active', 'ended'"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"partnership_streak"})," (Integer)"]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,d.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}}}]);